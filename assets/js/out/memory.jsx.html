<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="utf-8">
    <title>JSDoc: Source: memory.jsx</title>

    <script src="scripts/prettify/prettify.js"> </script>
    <script src="scripts/prettify/lang-css.js"> </script>
    <!--[if lt IE 9]>
      <script src="//html5shiv.googlecode.com/svn/trunk/html5.js"></script>
    <![endif]-->
    <link type="text/css" rel="stylesheet" href="styles/prettify-tomorrow.css">
    <link type="text/css" rel="stylesheet" href="styles/jsdoc-default.css">
</head>

<body>

<div id="main">

    <h1 class="page-title">Source: memory.jsx</h1>

    



    
    <section>
        <article>
            <pre class="prettyprint source linenums"><code>import React from 'react';
import ReactDOM from 'react-dom';

export default function game_init(root) {
    ReactDOM.render(&lt;Memory/>, root);
}

/**
 * Represents the game of memory.

 Displays the name, board, and button to restart.
 */
class Memory extends React.Component {
  /* Constructs a react Component for the game_init

  initializes the list of tiles (randomized)

  */
  constructor(props) {
    super(props);

    let list_of_tiles = [...Array(8).keys()];
    let list_of_pairs = list_of_tiles.concat(list_of_tiles);
    let tiles = this.randomizeTiles(list_of_pairs);

    this.state = {
      tiles: tiles,
    }

    this.board = React.createRef();
  }

  /* Resets the game board.

  */
  Void
  restart() {
    this.setState({ tiles: this.randomizeTiles(this.state.tiles) });
    this.board.current.hideTiles();
  }

  randomizeTiles(arr) {
      return arr.sort(function (t1, t2) {
          return 0.5 - Math.random()
      });
  }

  render() {
    // Generate the list of tiles
    console.log("Render");

    return &lt;div className="column">

      &lt;h1>Memory Game!&lt;/h1>
      &lt;Board tiles={ this.state.tiles } ref={ this.board } key="gameBoard" />
      &lt;button onClick={() => this.restart()}>Restart Game&lt;/button>
    &lt;/div>
  }
}


class Board extends React.Component {
    constructor(props) {
        super(props);

        this.state = {
            revealed: props.tiles.map( (x) => false ),
            firstClicked: null,
        };

        this.checkMatch = this.checkMatch.bind(this)
    }

    hideTiles() {
      this.setState({ revealed: this.state.revealed.map( (x) => false) });
    }

    checkMatch(index) {
      let clicked = this.props.tiles[index];
      let revealed = this.state.revealed;
      revealed[index] = true;

      if (this.state.firstClicked == null) {
        this.setState({ revealed: revealed, firstClicked: index, });
      } else {
        this.setState({ revealed: revealed });
        let first_index = this.state.firstClicked;
        let last_clicked = this.props.tiles[first_index];

        if (last_clicked == clicked) {
          if (this.state.revealed.every((x) => x)) {
            setTimeout(() => alert("You WIN!"), 100);
          }
        } else {
          let hide_tiles = () => {
            revealed[index] = false;
            revealed[first_index] = false;
            this.setState({ revealed: revealed })
          }
          setTimeout(hide_tiles, 500);
        }
        this.setState({ firstClicked: null });
      }
    }

    render() {

        // Generates the HTML for a 4 x 4 game board.
        let board = [];
        for (var i = 0; i &lt; 4; i++) {
            let row = [];

            for (var k = 0; k &lt; 4; k++) {
                let index = i * 4 + k;
                row.push(&lt;Tile value={ this.props.tiles[index] }
                  revealed={ this.state.revealed[index] }
                  handleClick={(x) => this.checkMatch(x)}
                  index={index} key={index}/>);
            }

            board.push(&lt;div className="row"> {row}&lt;/div>);
        }

        return &lt;div className="column"> {board} &lt;/div>
    }
}

function Tile(props) {
  if (props.revealed) {
    return &lt;button>{ props.value }&lt;/button>;
  } else {
    return &lt;button onClick={ () => props.handleClick(props.index) }>?&lt;/button>;
  }
}
</code></pre>
        </article>
    </section>




</div>

<nav>
    <h2><a href="index.html">Home</a></h2><h3>Classes</h3><ul><li><a href="Memory.html">Memory</a></li></ul>
</nav>

<br class="clear">

<footer>
    Documentation generated by <a href="https://github.com/jsdoc3/jsdoc">JSDoc 3.5.5</a> on Mon Sep 24 2018 22:14:56 GMT-0400 (EDT)
</footer>

<script> prettyPrint(); </script>
<script src="scripts/linenumber.js"> </script>
</body>
</html>
